<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pickyboy.yuquebackend.mapper.LikesMapper">
    <select id="likeHistory" resultType="com.pickyboy.yuquebackend.domain.vo.user.ActivityRecord">
            SELECT
                l.resource_id AS resourceId,
                r.title AS resourceTitle,
                r.type AS resourceType,
                kb.id AS kbId,
                kb.name AS kbName,
                u.id AS authorId,
                u.nickname AS authorName,
                l.created_at AS actionAt
                FROM likes as l JOIN resources as r ON l.resource_id = r.id
                    JOIN knowledge_bases as kb ON r.knowledge_base_id = kb.id
                    JOIN users as u ON r.user_id = u.id
            WHERE l.user_id = #{userId}
            ORDER BY l.created_at DESC
            LIMIT #{limit} OFFSET #{offset}
    </select>
</mapper>
